rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Default rule: Allow client-side reads, deny all client-side writes.
    // Our backend functions with Admin privileges will bypass the write rule.
    match /{document=**} {
      allow read: if true;
      allow write: if false;
    }

    // Specific rule for the 'shops' collection to allow our function to write.
    // Although the admin SDK should bypass rules, we are making it explicit.
    match /shops/{shopId} {
        // Allow read for clients (e.g., to check installation status)
        allow read: if true;
        // Do not allow clients to write shop info. Only our backend can.
        allow write: if false;
    }
  }
}
